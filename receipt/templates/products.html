{% extends 'base.html' %}
{% load static %}
{% block main %}
<main>
  <h1>Orders</h1>

  <div class="date">
    <input type="date">
  </div>

  <div class="products_list">
    <table>
      <thead>
        <tr>
          <th>Product</th>
          <th>Unit Price</th>
          <th>Numbers Sold</th>
        </tr>
      </thead>
      <tbody>
        {% for product in products %}
          <tr id="product-{{ product.id }}">
            <td>{{ product.name }}</td>
            <td>{{ product.price }}</td>
            <td>{{ product.get_total_sales }}</td>
            <td class="primary detail" data-product-id="{{ product.id }}">
              <span>Details</span>
              <button>
                <span class="material-symbols-outlined">
                more_vert
                </span>  
              </button>
              <div class="detail-options">
                <p data-action="edit">Edit</p>
                <p data-action="delete">Delete</p>
              </div>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="add-product-main">
    <div>
      <span class="material-symbols-outlined">
      add
      </span>
      Add Product
    </div>
  </div>
  <div class="product_details">
    <div class="close" id="close-btn">
      <span class="material-symbols-outlined">
      close</span>
    </div>
    <div class="edit_product"> 
      <h2>Edit Product</h2>
      <form method="post" action="products">
        {% csrf_token %}
        <div class="edit-inputs">
          <input type="hidden" name="id">
          <input placeholder="Product Name" name="product" type="text">
          <input placeholder="Unit price" type="text" name="unit-price">
          <div>
            <h3>Sales</h3>
            <div></div>
          </div>
        </div>
      <input type="submit" name="" id="submit" value="Save">
      </form>  
    </div>
    <div class="delete-product">
      <h2>Delete Product</h2>
      <h3></h3>
      <div>
        <form action="" method="post">
          {% csrf_token %}
          <input type="hidden" name="delete" value="delete">
          <input type="hidden" name="id">
          <button data-action="yes">Yes</button>        
        </form>

        <button data-action="no">No</button>
      </div>
    </div>
    <div class="add-new-product" id="newProduct">
      <h2>New Product</h2>
      <form method="post" class="" action="">
        {% csrf_token %}
        <div class="edit-inputs">
          <input type="hidden" name="new" value="new">
          <input name="name" placeholder="Product Name" type="text">
          <input name="price" placeholder="Unit Price" type="text">     
        </div>
      <input type="submit" name="" id="submit" value="Add">
      </form>      
    </div>
    {{ products_js|json_script:"products_js" }}
    {{ sales_js|json_script:"sales_js" }}
  </div>
</main> 
{% endblock main %}
  

{% block pagejs %}
  <script src="{% static 'js/products.js' %}"></script>
{% endblock pagejs %}
  